<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notification Admin - Nouveau Devis - SystemsMatic</title>
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/editor.css" />
    <link rel="stylesheet" href="styles/admin.css" />
  </head>
  <body>
    <div class="controls">
      <a href="index.html" class="back-link">â† Retour Ã  l'index</a>
      <h2>ğŸ‘¨â€ğŸ’¼ Template : Notification Admin - Nouveau Devis</h2>
      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 15px;
        "
      >
        <div class="control-group">
          <label for="contactName">Nom du contact</label>
          <input
            type="text"
            id="contactName"
            value="Jean Dupont"
            onchange="updatePreview()"
          />
        </div>
        <div class="control-group">
          <label for="contactEmail">Email du contact</label>
          <input
            type="email"
            id="contactEmail"
            value="jean.dupont@example.com"
            onchange="updatePreview()"
          />
        </div>
        <div class="control-group">
          <label for="contactPhone">TÃ©lÃ©phone du contact</label>
          <input
            type="tel"
            id="contactPhone"
            value="+33 6 12 34 56 78"
            onchange="updatePreview()"
            placeholder="Laissez vide si pas de tÃ©lÃ©phone"
          />
        </div>
        <div class="control-group">
          <label for="acceptPhone">Accepte les appels</label>
          <select id="acceptPhone" onchange="updatePreview()">
            <option value="true">Oui</option>
            <option value="false">Non</option>
          </select>
        </div>
        <div class="control-group">
          <label for="message">Description du projet</label>
          <textarea id="message" onchange="updatePreview()">
Bonjour, nous souhaitons moderniser notre infrastructure informatique. Nous avons actuellement 20 postes de travail et 3 serveurs qui nÃ©cessitent une mise Ã  jour. Nous aimerions Ã©galement mettre en place une solution de sauvegarde cloud et amÃ©liorer notre sÃ©curitÃ© rÃ©seau.</textarea
          >
        </div>
        <div class="control-group">
          <label for="adminUrl">URL du backoffice</label>
          <input
            type="text"
            id="adminUrl"
            value="https://systemsmatic.com/admin/quotes"
            onchange="updatePreview()"
          />
        </div>
      </div>
      <div style="margin-top: 15px">
        <button class="btn" onclick="resetData()">ğŸ”„ RÃ©initialiser</button>
        <button class="btn btn-secondary" onclick="copyCode()">
          ğŸ“‹ Copier le code
        </button>
      </div>
    </div>

    <div class="editor-container">
      <div class="editor-panel">
        <div class="editor-header">ğŸ“ Code HTML/CSS</div>
        <div class="editor-content">
          <textarea
            id="codeEditor"
            class="code-editor"
            onchange="updatePreview()"
          >
<div class="email-container">
    <div class="email-header">
        <div class="email-header-icon">ğŸ’°</div>
        <div class="email-header-title">Nouvelle demande de devis</div>
        <div class="email-header-subtitle">SystemsMatic</div>
    </div>

    <div class="email-content">
        <div class="greeting">Bonjour Admin,</div>
        
        <div class="paragraph">
            Une nouvelle demande de devis a Ã©tÃ© soumise et nÃ©cessite votre attention.
        </div>

        <div class="admin-info-box client">
            <div class="admin-info-box-title">ğŸ‘¤ Informations du client</div>
            <div class="admin-info-box-text">
                <p><strong>Nom :</strong><br>
                <span id="contactNameDisplay">Jean Dupont</span></p>
                
                <p><strong>Email :</strong><br>
                <a href="mailto:jean.dupont@example.com" style="color: #007bff;">
                    <span id="contactEmailDisplay">jean.dupont@example.com</span>
                </a></p>
                
                <p id="contactPhoneDisplay" style="display: none;"><strong>TÃ©lÃ©phone :</strong><br>
                <a href="tel:+33612345678" style="color: #007bff;">
                    <span id="contactPhoneText">+33 6 12 34 56 78</span>
                </a></p>
                
                <p id="phoneAcceptanceDisplay">
                    <strong>Accepte d'Ãªtre recontactÃ© par tÃ©lÃ©phone :</strong><br>
                    <span id="phoneAcceptanceText" style="color: #28a745; font-weight: bold;">âœ… Oui</span>
                </p>
            </div>
        </div>

        <div class="admin-info-box details">
            <div class="admin-info-box-title">ğŸ’¼ Description du projet</div>
            <div class="admin-info-box-text" style="white-space: pre-wrap; line-height: 1.6;" id="messageDisplay">
                Bonjour, nous souhaitons moderniser notre infrastructure informatique. Nous avons actuellement 20 postes de travail et 3 serveurs qui nÃ©cessitent une mise Ã  jour. Nous aimerions Ã©galement mettre en place une solution de sauvegarde cloud et amÃ©liorer notre sÃ©curitÃ© rÃ©seau.
            </div>
        </div>

        <div class="admin-info-box action">
            <div class="admin-info-box-title">âš¡ Action requise</div>
            <div class="admin-info-box-text">
                <p style="margin: 0 0 10px 0;">
                    <strong>Contactez le client dans les plus brefs dÃ©lais pour :</strong>
                </p>
                <ul style="margin: 0; padding-left: 20px;">
                    <li>Analyser les besoins du projet</li>
                    <li>Ã‰tablir un devis personnalisÃ©</li>
                    <li>Planifier une Ã©ventuelle visite</li>
                    <li>Proposer des solutions adaptÃ©es</li>
                </ul>
            </div>
        </div>

        <div class="button-container">
            <a href="mailto:jean.dupont@example.com?subject=Devis personnalisÃ© - SystemsMatic" class="admin-btn admin-btn-primary">ğŸ“§ RÃ©pondre au client</a>
            <a href="tel:+33612345678" class="admin-btn admin-btn-success" id="callButton" style="display: none;">ğŸ“ Appeler le client</a>
        </div>

        <div class="footer-note">
            Cette notification a Ã©tÃ© envoyÃ©e automatiquement suite Ã  une nouvelle demande de devis.
        </div>
    </div>

    <hr class="email-hr">

    <div class="email-footer">
        <div class="email-footer-text">SystemsMatic</div>
        <div class="email-footer-text">
            Cet email a Ã©tÃ© envoyÃ© automatiquement, merci de ne pas y rÃ©pondre directement.
        </div>
    </div>
</div>
                </textarea
          >
        </div>
      </div>

      <div class="preview-panel">
        <div class="preview-header">ğŸ‘ï¸ PrÃ©visualisation</div>
        <div class="preview-content">
          <div id="preview"></div>
        </div>
      </div>
    </div>

    <script>
      function updatePreview() {
        const code = document.getElementById("codeEditor").value;
        const preview = document.getElementById("preview");

        // Mettre Ã  jour les donnÃ©es dynamiques
        const contactName = document.getElementById("contactName").value;
        const contactEmail = document.getElementById("contactEmail").value;
        const contactPhone = document.getElementById("contactPhone").value;
        const acceptPhone =
          document.getElementById("acceptPhone").value === "true";
        const message = document.getElementById("message").value;
        const adminUrl = document.getElementById("adminUrl").value;

        preview.innerHTML = code;

        // Mettre Ã  jour les Ã©lÃ©ments avec des IDs spÃ©cifiques
        const contactNameDisplay = preview.querySelector("#contactNameDisplay");
        if (contactNameDisplay) contactNameDisplay.textContent = contactName;

        const contactEmailDisplay = preview.querySelector(
          "#contactEmailDisplay"
        );
        if (contactEmailDisplay) contactEmailDisplay.textContent = contactEmail;

        const contactPhoneDisplay = preview.querySelector(
          "#contactPhoneDisplay"
        );
        const contactPhoneText = preview.querySelector("#contactPhoneText");
        const callButton = preview.querySelector("#callButton");
        if (contactPhone && contactPhone.trim()) {
          if (contactPhoneDisplay) contactPhoneDisplay.style.display = "block";
          if (contactPhoneText) contactPhoneText.textContent = contactPhone;
        } else {
          if (contactPhoneDisplay) contactPhoneDisplay.style.display = "none";
        }

        const phoneAcceptanceDisplay = preview.querySelector(
          "#phoneAcceptanceDisplay"
        );
        const phoneAcceptanceText = preview.querySelector(
          "#phoneAcceptanceText"
        );
        if (phoneAcceptanceDisplay && phoneAcceptanceText) {
          if (acceptPhone) {
            phoneAcceptanceDisplay.style.color = "#28a745";
            phoneAcceptanceText.textContent = "âœ… Oui";
          } else {
            phoneAcceptanceDisplay.style.color = "#dc3545";
            phoneAcceptanceText.textContent = "âŒ Non";
          }
        }

        // Afficher le bouton d'appel seulement si tÃ©lÃ©phone fourni ET acceptÃ©
        if (callButton) {
          if (contactPhone && contactPhone.trim() && acceptPhone === "true") {
            callButton.style.display = "inline-block";
            callButton.href = `tel:${contactPhone}`;
          } else {
            callButton.style.display = "none";
          }
        }

        const messageDisplay = preview.querySelector("#messageDisplay");
        if (messageDisplay) messageDisplay.textContent = message;

        const adminButton = preview.querySelector("#adminButton");
        if (adminButton) adminButton.href = adminUrl;
      }

      function resetData() {
        document.getElementById("contactName").value = "Jean Dupont";
        document.getElementById("contactEmail").value =
          "jean.dupont@example.com";
        document.getElementById("contactPhone").value = "+33 6 12 34 56 78";
        document.getElementById("acceptPhone").value = "true";
        document.getElementById("message").value =
          "Bonjour, nous souhaitons moderniser notre infrastructure informatique. Nous avons actuellement 20 postes de travail et 3 serveurs qui nÃ©cessitent une mise Ã  jour. Nous aimerions Ã©galement mettre en place une solution de sauvegarde cloud et amÃ©liorer notre sÃ©curitÃ© rÃ©seau.";
        document.getElementById("adminUrl").value =
          "https://systemsmatic.com/admin/quotes";
        updatePreview();
      }

      function copyCode() {
        const code = document.getElementById("codeEditor").value;
        navigator.clipboard.writeText(code).then(() => {
          alert("Code copiÃ© dans le presse-papiers !");
        });
      }

      // Initialiser la prÃ©visualisation
      updatePreview();
    </script>
  </body>
</html>
